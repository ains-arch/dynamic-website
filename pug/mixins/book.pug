mixin book(book) 
  div(class='book')
    if book.imageSrc 
      if book.href
        a(href=book.href)
          img(
            class={'book-cover': true, 'bordered': book.border},
            src=book.imageSrc,
            alt="Cover image of #{book.title}"
          )
      else
        img(
          class={'book-cover': true, 'border': book.border},
          src=book.imageSrc,
          alt="Cover image of #{book.title}"
        )

    .book-details
      div.title
        i #{book.title}

        if book.subtitle 
          .subtitle 
            i #{book.subtitle}

      div.byline
        if book.author
          | #{book.author}.      

        if book.publisher
          |  Published by #{book.publisher}
          if !book.formattedDate
            | .
          else
            | , #{book.formattedDate}.
        else 
          if book.formattedDate
            | Published #{book.formattedDate}. 
      
      .reading-info
        if book.status 
          div(class=['status', book.status])
            if book.status === 'currentlyReading'
              | Currently reading
            else if book.status === 'read'
              | Read
            else if book.status === 'toRead'
              | To read
        
        if book.formattedStarted
          .reading-dates 
            | Started #{book.formattedStarted}
            if !book.formattedCompleted
              | .
            else 
              | ; completed #{book.formattedCompleted}.
            
      if book.tags
        div(class="tags")
          span.tags= book.tags.map(function(t) { return t.text }).join(', ')